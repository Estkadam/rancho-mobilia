<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Complete King Bedroom Sets for Maximum Comfort and Style - Best High End Furniture Store In Rancho Cucamonga</title><meta name="description" content="Discover the Best Deals on Living Room Sets Are you looking to refresh your living space? Finding the best deals on living room sets can make a significant difference in your home’s aesthetic and comfort. Whether you're moving into a new home, redecorating, or simply wanting a change, shopping for living room furniture can be both exciting and daunting. In this guide, we will cover everything you need to know about finding the best deals on living room sets, including styles, materials, and tips to ensure you make a wise investment. Your living room is often the heart of your&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://rancho-mobilia.vercel.app/complete-king-bedroom-sets-for-maximum-comfort-and-style/"><link rel="alternate" type="application/atom+xml" href="https://rancho-mobilia.vercel.app/feed.xml"><link rel="alternate" type="application/json" href="https://rancho-mobilia.vercel.app/feed.json"><meta property="og:title" content="Complete King Bedroom Sets for Maximum Comfort and Style"><meta property="og:image" content="https://rancho-mobilia.vercel.app/media/posts/22/Luxury-Sofa-Sets-2.webp"><meta property="og:image:width" content="800"><meta property="og:image:height" content="454"><meta property="og:site_name" content="Best High End Furniture Store In Rancho Cucamonga"><meta property="og:description" content="Discover the Best Deals on Living Room Sets Are you looking to refresh your living space? Finding the best deals on living room sets can make a significant difference in your home’s aesthetic and comfort. Whether you're moving into a new home, redecorating, or simply wanting a change, shopping for living room furniture can be both exciting and daunting. In this guide, we will cover everything you need to know about finding the best deals on living room sets, including styles, materials, and tips to ensure you make a wise investment. Your living room is often the heart of your&hellip;"><meta property="og:url" content="https://rancho-mobilia.vercel.app/complete-king-bedroom-sets-for-maximum-comfort-and-style/"><meta property="og:type" content="article"><link rel="stylesheet" href="https://rancho-mobilia.vercel.app/assets/css/style.css?v=a34f7f306e17d832ae526bf6493c4be9"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://rancho-mobilia.vercel.app/complete-king-bedroom-sets-for-maximum-comfort-and-style/"},"headline":"Complete King Bedroom Sets for Maximum Comfort and Style","datePublished":"2025-01-01T14:35","dateModified":"2025-01-28T14:20","image":{"@type":"ImageObject","url":"https://rancho-mobilia.vercel.app/media/posts/22/Luxury-Sofa-Sets-2.webp","height":454,"width":800},"description":"Discover the Best Deals on Living Room Sets Are you looking to refresh your living space? Finding the best deals on living room sets can make a significant difference in your home’s aesthetic and comfort. Whether you're moving into a new home, redecorating, or simply wanting a change, shopping for living room furniture can be both exciting and daunting. In this guide, we will cover everything you need to know about finding the best deals on living room sets, including styles, materials, and tips to ensure you make a wise investment. Your living room is often the heart of your&hellip;","author":{"@type":"Person","name":"Freedy Adamz","url":"https://rancho-mobilia.vercel.app/authors/freedy-adamz/"},"publisher":{"@type":"Organization","name":"Freedy Adamz"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><meta name="google-site-verification" content="vUnRyR_da92AHrthAXAipRJilkDR9NhnPvRj2B41F_s"></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://rancho-mobilia.vercel.app/">Best High End Furniture Store In Rancho Cucamonga</a></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://rancho-mobilia.vercel.app/media/posts/22/Luxury-Sofa-Sets-2.webp" srcset="https://rancho-mobilia.vercel.app/media/posts/22/responsive/Luxury-Sofa-Sets-2-xs.webp 300w, https://rancho-mobilia.vercel.app/media/posts/22/responsive/Luxury-Sofa-Sets-2-sm.webp 480w, https://rancho-mobilia.vercel.app/media/posts/22/responsive/Luxury-Sofa-Sets-2-md.webp 768w, https://rancho-mobilia.vercel.app/media/posts/22/responsive/Luxury-Sofa-Sets-2-lg.webp 1024w, https://rancho-mobilia.vercel.app/media/posts/22/responsive/Luxury-Sofa-Sets-2-xl.webp 1360w, https://rancho-mobilia.vercel.app/media/posts/22/responsive/Luxury-Sofa-Sets-2-2xl.webp 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="454" width="800" alt=""></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2025-01-01T14:35">January 1, 2025</time></div><h1>Complete King Bedroom Sets for Maximum Comfort and Style</h1><div class="post__meta post__meta--author"><a href="https://rancho-mobilia.vercel.app/authors/freedy-adamz/" class="feed__author">Freedy Adamz</a></div></div></header></div><div class="wrapper post__entry"><h2>Discover the Best Deals on Living Room Sets</h2><p>Are you looking to refresh your living space? Finding the best deals on living room sets can make a significant difference in your home’s aesthetic and comfort. Whether you're moving into a new home, redecorating, or simply wanting a change, shopping for living room furniture can be both exciting and daunting. In this guide, we will cover everything you need to know about finding the best deals on living room sets, including styles, materials, and tips to ensure you make a wise investment.</p><h2>Understanding the Importance of Living Room Sets</h2><p>Your living room is often the heart of your home. It’s where family gathers, friends mingle, and you relax after a long day. Thus, choosing the right living room set is crucial. A cohesive, stylish living room set not only enhances the aesthetic appeal of your space but also offers functionality and comfort. Here’s why shopping wisely for your living room set matters:</p><ul><li><strong>Style and Cohesion:</strong> A well-chosen living room set ties your space together.</li><li><strong>Comfort:</strong> The right furniture makes your space inviting and comfortable.</li><li><strong>Functionality:</strong> Quality sets offer versatile usage and durability.</li></ul><p><a href="https://www.mobiliacleopatra.com/accent-furniture/console-tables/">accent console table</a> <a href="https://www.mobiliacleopatra.com/accent-furniture/accent-chair/">accent chairs</a> <a href="https://www.mobiliacleopatra.com/youth/bunk-bed/">bunk and loft beds</a> <a href="https://www.mobiliacleopatra.com/bedroom/beds/">luxury beds</a></p><h2>Types of Living Room Sets</h2><p>When shopping for living room sets, you need to consider the types available. The right choice depends on your lifestyle, preferences, and the size of your living area. Here are some popular types of living room sets to consider:</p><h3>1. Sofa Sets</h3><p>Sofa sets are often the centerpiece of your living room. They come in various styles, including traditional, modern, sectional, and recliner sofas. Choose one that fits your space and style.</p><h3>2. Living Room Furniture Collections</h3><p>Furniture collections typically include a sofa, chairs, and coffee tables or accent tables. This option offers a cohesive look without the hassle of mixing and matching.</p><h3>3. Sectional Sofas</h3><p>Sectional sofas provide ample seating and are versatile in design. They can easily fit into a corner or serve as a divider in open-concept spaces.</p><h3>4. Love Seats and Chairs</h3><p>If you have a smaller living space or a cozy nook, adding a love seat or accent chairs can provide extra seating without overwhelming the area.</p><h2>Choosing the Right Material</h2><p>The material of your living room set is essential for both aesthetics and practicality. Here’s a breakdown of common materials:</p><ul><li><strong>Fabric:</strong> Soft and comfortable, fabric is versatile but may require regular cleaning.</li><li><strong>Leather:</strong> Durable and easy to clean, leather adds a touch of luxury but can be more expensive.</li><li><strong>Microfiber:</strong> Easy to clean and resistant to stains, microfiber is perfect for families and pet owners.</li><li><strong>Wood:</strong> Ideal for tables and chairs, wooden furniture adds warmth and is often very durable.</li></ul><h2>Setting a Budget</h2><p>Setting a budget before you start shopping is crucial to ensure you find the best deals on living room sets. Here are steps to help you stick to your budget:</p><ul><li><strong>Research Prices:</strong> Look at different stores and online platforms to get a sense of prices.</li><li><strong>Prioritize Needs:</strong> Focus on must-have items before considering optional pieces.</li><li><strong>Look for Sales:</strong> Waiting for sales events like Black Friday or end-of-season sales can yield significant savings.</li></ul><h2>Where to Find the Best Deals</h2><p>Now that you're aware of what to look for, the next step is knowing where to find the best deals on living room sets. Here are some options to explore:</p><h3>1. Online Retailers</h3><p>Websites like Amazon, Wayfair, and Overstock regularly offer competitive prices and free shipping on larger items. Don’t forget to compare multiple sites to find the best deal.</p><h3>2. Local Furniture Stores</h3><p>Visit local furniture stores for sales, clearance events, or floor models at discounted prices. Plus, you can see the furniture in person and test the comfort level.</p><h3>3. Thrift Stores and Consignment Shops</h3><p>If you're looking for something unique or vintage, thrift stores and consignment shops can be treasure troves for affordable furniture.</p><h3>4. Social Media and Marketplace Platforms</h3><p>Platforms like Facebook Marketplace and Craigslist allow you to purchase gently-used furniture at a bargain price. Just always inspect items carefully before buying.</p><h2>Tips for Shopping Smart</h2><p>To ensure you snag the best deals on living room sets, keep these tips in mind:</p><ul><li><strong>Take Measurements:</strong> Measure your space before you shop to avoid buying oversized furniture.</li><li><strong>Don’t Rush:</strong> Take your time when browsing; it's essential to find the right piece.</li><li><strong>Ask About Warranties:</strong> Some retailers offer warranties or satisfaction guarantees, so always inquire.</li><li><strong>Look at Reviews:</strong> Check customer reviews to gauge the quality and comfort of the sets you're considering.</li></ul><p><a href="https://www.mobiliacleopatra.com/bedroom/bedroom-bench/">bedroom bench</a> <a href="https://www.mobiliacleopatra.com/bedroom/chest/">bedroom chest</a> <a href="https://www.mobiliacleopatra.com/bedroom/media-chest/">media chest</a> <a href="https://www.mobiliacleopatra.com/bedroom/bed-frame/">bed frame</a> <a href="https://www.mobiliacleopatra.com/bedroom/vanity/">dressing tables</a> <a href="https://www.mobiliacleopatra.com/bedroom/vanity/">bedroom vanity</a> <a href="https://www.mobiliacleopatra.com/bedroom/vanity/">bedroom vainties</a> <a href="https://www.mobiliacleopatra.com/dining-rooms/dining-sets/">luxury dining room furniture</a></p><h2>Final Thoughts</h2><p>Finding the best deals on living room sets doesn't have to be overwhelming. By knowing what types of furniture you want, understanding different materials, setting a budget, and knowing where to shop, you can transform your living space affordably. Take your time to make the smart choice that reflects your style and meets your needs. Happy shopping, and may you find the perfect living room set to enhance your home!</p><h2>Remember to Personalize Your Space</h2><p>Always remember that your living room reflects your personality. While you're focused on deals and discounts, don’t forget to think about how you can incorporate pieces that speak to your unique taste. Add personal touches with decorations, throws, and art to create a warm and inviting space for everyone who steps through your door.</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on January 28, 2025</p><div class="post__share"></div><div class="post__bio bio"><div><h3 class="bio__name"><a href="https://rancho-mobilia.vercel.app/authors/freedy-adamz/" rel="author">Freedy Adamz</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://rancho-mobilia.vercel.app/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://rancho-mobilia.vercel.app/discount-living-room-furniture-sets-great-savings-on-comfort/" class="post__nav-link" rel="prev"><span>Previous</span> Discount Living Room Furniture Sets: Great Savings on Comfort</a></div><div class="post__nav-next"><a href="https://rancho-mobilia.vercel.app/discount-living-room-furniture-sets-great-savings-on-comfort/" class="post__nav-link" rel="next"><span>Next</span> Discount Living Room Furniture Sets: Great Savings on Comfort </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://rancho-mobilia.vercel.app/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav><div class="post__related related"><div class="wrapper"><h2 class="h5 related__title">You should also read:</h2><article class="related__item"><div class="feed__meta"><time datetime="2025-01-01T14:35" class="feed__date">January 1, 2025</time></div><h3 class="h1"><a href="https://rancho-mobilia.vercel.app/elegant-classy-bedroom-sets-for-a-stylish-retreat/">Elegant Classy Bedroom Sets for a Stylish Retreat</a></h3></article><article class="related__item"><div class="feed__meta"><time datetime="2025-01-01T14:35" class="feed__date">January 1, 2025</time></div><h3 class="h1"><a href="https://rancho-mobilia.vercel.app/new-furniture-arrivals-shop-the-latest-trends-and-styles/">New Furniture Arrivals: Shop the Latest Trends and Styles</a></h3></article><article class="related__item"><div class="feed__meta"><time datetime="2025-01-01T14:35" class="feed__date">January 1, 2025</time></div><h3 class="h1"><a href="https://rancho-mobilia.vercel.app/best-furniture-stores-in-rancho-cucamonga-for-quality-and-comfort/">Best Furniture Stores in Rancho Cucamonga for Quality and Comfort</a></h3></article></div></div></main><footer class="footer"><div class="footer__copyright"><p>All Rights Reserved 2025</p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://rancho-mobilia.vercel.app/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script defer="defer" src="https://rancho-mobilia.vercel.app/assets/js/scripts.min.js?v=f47c11534595205f20935f0db2a62a85"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="#not-specified">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Manage preferences</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" aria-level="2" class="pcb__title">Cookie settings</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. <a href="#not-specified">More details...</a></div><ul class="pcb__groups"><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Required</summary></details><div class="pcb__popup__switch is-checked"><input type="checkbox" data-group-name="" id="pcb-group-0" checked="checked"> <label for="pcb-group-0">Required</label></div></li></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && cbConfig.initialLsState.indexOf(allowedGroup) === -1) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('🍪 GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>